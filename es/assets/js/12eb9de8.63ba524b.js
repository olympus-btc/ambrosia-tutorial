"use strict";(globalThis.webpackChunkambrosia_tutorial=globalThis.webpackChunkambrosia_tutorial||[]).push([[111],{6890:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"quick-start-docker/channel","title":"Closing a channel","description":"Closing a channel is final and cannot be cancelled.","source":"@site/docs/quick-start-docker/channel.md","sourceDirName":"quick-start-docker","slug":"/channel-close-docker","permalink":"/es/channel-close-docker","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Closing a channel","sidebar_position":5,"slug":"/channel-close-docker"},"sidebar":"tutorialSidebar","previous":{"title":"Processing Sales (Cart)","permalink":"/es/quick-cart-docker"}}');var o=i(4848),l=i(8453);const c={title:"Closing a channel",sidebar_position:5,slug:"/channel-close-docker"},r="Close a Lightning Channel",a={},t=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1:  Open a terminal and ensure phoenixd is running",id:"step-1--open-a-terminal-and-ensure-phoenixd-is-running",level:2},{value:"For Linux/MacOS",id:"for-linuxmacos",level:3},{value:"Step 2: List your channels",id:"step-2-list-your-channels",level:2},{value:"For Linux/MacOS",id:"for-linuxmacos-1",level:3},{value:"For Windows",id:"for-windows",level:3},{value:"Step 3: Close the channel",id:"step-3-close-the-channel",level:2},{value:"For Linux/MacOS",id:"for-linuxmacos-2",level:3},{value:"For Windows",id:"for-windows-1",level:3},{value:"Result",id:"result",level:2}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"close-a-lightning-channel",children:"Close a Lightning Channel"})}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:["Closing a channel is ",(0,o.jsx)(n.strong,{children:"final"})," and ",(0,o.jsx)(n.strong,{children:"cannot be cancelled"}),".",(0,o.jsx)(n.br,{}),"\n","Only do this if you're closing your shop or you're doing a workshop."]})}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsx)(n.p,{children:"Ambrosia must be running in order to close the channel."})}),"\n",(0,o.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"channel ID"})," you want to close"]}),"\n",(0,o.jsxs)(n.li,{children:["A valid ",(0,o.jsx)(n.code,{children:"Bitcoin on-chain address"})]}),"\n",(0,o.jsxs)(n.li,{children:["A suitable ",(0,o.jsx)(n.code,{children:"fee rate (in sat/vbyte)"})]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["You can see current fee rates using a Bitcoin block explorer like ",(0,o.jsx)(n.a,{href:"https://mempool.space/",children:"https://mempool.space/"})]})}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:["Fee rate is for the child's feerate, set a higher value for an effective parent+child fee rate.",(0,o.jsx)(n.br,{}),"\n","All funds will be sent to the on-chain Bitcoin address you provide."]})}),"\n",(0,o.jsx)(n.h2,{id:"step-1--open-a-terminal-and-ensure-phoenixd-is-running",children:"Step 1:  Open a terminal and ensure phoenixd is running"}),"\n",(0,o.jsx)(n.h3,{id:"for-linuxmacos",children:"For Linux/MacOS"}),"\n",(0,o.jsx)(n.p,{children:"Verify that the Phoenix container is up:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker ps\n"})}),"\n",(0,o.jsxs)(n.p,{children:["You should see a container named ",(0,o.jsx)(n.code,{children:"phoenixd"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"step-2-list-your-channels",children:"Step 2: List your channels"}),"\n",(0,o.jsx)(n.h3,{id:"for-linuxmacos-1",children:"For Linux/MacOS"}),"\n",(0,o.jsx)(n.p,{children:"List all channels:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker exec -it phoenixd /phoenix/phoenix-cli getinfo\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Copy the ",(0,o.jsx)(n.code,{children:"channelId"})," of the channel you want to close."]}),"\n",(0,o.jsx)(n.h3,{id:"for-windows",children:"For Windows"}),"\n",(0,o.jsxs)(n.p,{children:["Open Docker Desktop and click on ",(0,o.jsx)(n.code,{children:"Terminal"})," (bottom right corner), then:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ps",children:"docker exec phoenixd phoenix-cli getinfo\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Copy the ",(0,o.jsx)(n.code,{children:"channelId"})," of the channel you want to close."]}),"\n",(0,o.jsx)(n.h2,{id:"step-3-close-the-channel",children:"Step 3: Close the channel"}),"\n",(0,o.jsx)(n.h3,{id:"for-linuxmacos-2",children:"For Linux/MacOS"}),"\n",(0,o.jsx)(n.p,{children:"Run the following command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker exec -it phoenixd /phoenix/phoenix-cli closechannel \\\n  --channelId=<CHANNEL_ID> \\\n  --address=<BITCOIN_ADDRESS> \\\n  --feerateSatByte=<FEE_RATE>\n"})}),"\n",(0,o.jsx)(n.h3,{id:"for-windows-1",children:"For Windows"}),"\n",(0,o.jsx)(n.p,{children:"Run the following command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ps",children:"docker exec phoenixd phoenix-cli closechannel \\\n  --channelId=<CHANNEL_ID> \\\n  --address=<BITCOIN_ADDRESS> \\\n  --feerateSatByte=<FEE_RATE>\n"})}),"\n",(0,o.jsx)(n.h2,{id:"result",children:"Result"}),"\n",(0,o.jsx)(n.p,{children:"If successful, Phoenix returns the transaction ID of the closing transaction:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:"758b3df67c62c9cd9ebbde1ff6eaadc1c51f94d5b1a3efb2548236b9a6f1c659\n"})}),"\n",(0,o.jsxs)(n.p,{children:["You can track this transaction using a Bitcoin block explorer like ",(0,o.jsx)(n.a,{href:"https://mempool.space/",children:"https://mempool.space/"})]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsx)(n.p,{children:"The channel status will display as 'Negotiating' even after a succesful closure, this is a phoenixd bug, the channel should be closed after 6 confirmations and sats won't be available since they were sent to an on chain address."})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>r});var s=i(6540);const o={},l=s.createContext(o);function c(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);