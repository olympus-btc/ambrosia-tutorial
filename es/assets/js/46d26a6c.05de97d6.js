"use strict";(globalThis.webpackChunkambrosia_tutorial=globalThis.webpackChunkambrosia_tutorial||[]).push([[389],{8175:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"quick-start-electron/channel","title":"Closing a channel","description":"Closing a channel is final and cannot be cancelled.","source":"@site/docs/quick-start-electron/channel.md","sourceDirName":"quick-start-electron","slug":"/channel-close-electron","permalink":"/es/channel-close-electron","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Closing a channel","sidebar_position":5,"slug":"/channel-close-electron"},"sidebar":"tutorialSidebar","previous":{"title":"Processing Sales (Cart)","permalink":"/es/quick-cart-electron"},"next":{"title":"Quick Start - Docker","permalink":"/es/quick-start-docker/"}}');var l=s(4848),r=s(8453);const o={title:"Closing a channel",sidebar_position:5,slug:"/channel-close-electron"},a="Close a Lightning Channel",c={},t=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Open a terminal and run this:",id:"step-1-open-a-terminal-and-run-this",level:2},{value:"For Linux (Ubuntu/Debian)",id:"for-linux-ubuntudebian",level:3},{value:"For Linux (Arm64)",id:"for-linux-arm64",level:3},{value:"For MacOS (Arm64)",id:"for-macos-arm64",level:3},{value:"For MacOS (Amd64)",id:"for-macos-amd64",level:3},{value:"For Windows",id:"for-windows",level:3},{value:"Install JRE21:",id:"install-jre21",level:4},{value:"For Windows (Arm64)",id:"for-windows-arm64",level:3},{value:"For Windows (Amd64)",id:"for-windows-amd64",level:3},{value:"Step 2: List your channels",id:"step-2-list-your-channels",level:2},{value:"For Linux/MacOS",id:"for-linuxmacos",level:3},{value:"For Windows",id:"for-windows-1",level:3},{value:"Step 3: Close the channel",id:"step-3-close-the-channel",level:2},{value:"For Linux/MacOS",id:"for-linuxmacos-1",level:3},{value:"For Windows",id:"for-windows-2",level:3},{value:"Result",id:"result",level:2}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"close-a-lightning-channel",children:"Close a Lightning Channel"})}),"\n",(0,l.jsx)(n.admonition,{type:"warning",children:(0,l.jsxs)(n.p,{children:["Closing a channel is ",(0,l.jsx)(n.strong,{children:"final"})," and ",(0,l.jsx)(n.strong,{children:"cannot be cancelled"}),".",(0,l.jsx)(n.br,{}),"\n","Only do this if you're closing your shop or you're doing a workshop."]})}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsx)(n.p,{children:"Ambrosia must be running in order to close the channel."})}),"\n",(0,l.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["The ",(0,l.jsx)(n.code,{children:"channel ID"})," you want to close"]}),"\n",(0,l.jsxs)(n.li,{children:["A valid ",(0,l.jsx)(n.code,{children:"Bitcoin on-chain address"})]}),"\n",(0,l.jsxs)(n.li,{children:["A suitable ",(0,l.jsx)(n.code,{children:"fee rate (in sat/vbyte)"})]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsxs)(n.p,{children:["You can see current fee rates using a Bitcoin block explorer like ",(0,l.jsx)(n.a,{href:"https://mempool.space/",children:"https://mempool.space/"})]})}),"\n",(0,l.jsx)(n.admonition,{type:"warning",children:(0,l.jsxs)(n.p,{children:["Fee rate is for the child's feerate, set a higher value for an effective parent+child fee rate.",(0,l.jsx)(n.br,{}),"\n","All funds will be sent to the on-chain Bitcoin address you provide."]})}),"\n",(0,l.jsx)(n.h2,{id:"step-1-open-a-terminal-and-run-this",children:"Step 1: Open a terminal and run this:"}),"\n",(0,l.jsx)(n.h3,{id:"for-linux-ubuntudebian",children:"For Linux (Ubuntu/Debian)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'export PATH="/opt/AmbrosiaPoS/resources/phoenixd/linux-x64:$PATH"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"for-linux-arm64",children:"For Linux (Arm64)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'export PATH="/opt/AmbrosiaPoS/resources/phoenixd/linux-arm64:$PATH"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"for-macos-arm64",children:"For MacOS (Arm64)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'export PATH="/Applications/AmbrosiaPoS.app/Contents/Resources/phoenixd/macos-arm64:$PATH"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"for-macos-amd64",children:"For MacOS (Amd64)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'export PATH="/Applications/AmbrosiaPoS.app/Contents/Resources/phoenixd/macos-x64:$PATH"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"for-windows",children:"For Windows"}),"\n",(0,l.jsx)(n.admonition,{type:"warning",children:(0,l.jsx)(n.p,{children:"Requires JRE21 and PowerShell"})}),"\n",(0,l.jsx)(n.h4,{id:"install-jre21",children:"Install JRE21:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Go to ",(0,l.jsx)(n.a,{href:"https://adoptium.net/temurin/releases/?version=21",children:"https://adoptium.net/temurin/releases/?version=21"})," and download the Windows version"]}),"\n",(0,l.jsx)(n.li,{children:"Run the .exe file"}),"\n",(0,l.jsx)(n.li,{children:"Follow the Installation wizard"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"for-windows-arm64",children:"For Windows (Arm64)"}),"\n",(0,l.jsx)(n.p,{children:"Open the terminal and run:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ps",children:'$env:PATH = "C:\\Users\\My-User\\AppData\\Local\\Programs\\AmbrosiaPoS\\resources\\phoenixd\\win-arm64\\bin;$env:PATH"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"for-windows-amd64",children:"For Windows (Amd64)"}),"\n",(0,l.jsx)(n.p,{children:"Open the terminal and run:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ps",children:'$env:PATH = "C:\\Users\\My-User\\AppData\\Local\\Programs\\AmbrosiaPoS\\resources\\phoenixd\\win-x64\\bin;$env:PATH"\n'})}),"\n",(0,l.jsx)(n.h2,{id:"step-2-list-your-channels",children:"Step 2: List your channels"}),"\n",(0,l.jsx)(n.h3,{id:"for-linuxmacos",children:"For Linux/MacOS"}),"\n",(0,l.jsx)(n.p,{children:"Run the CLI to list all channels:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"phoenix-cli getinfo\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Copy the ",(0,l.jsx)(n.code,{children:"channelId"})," of the channel you want to close."]}),"\n",(0,l.jsx)(n.h3,{id:"for-windows-1",children:"For Windows"}),"\n",(0,l.jsx)(n.p,{children:"Run the CLI to list all channels:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ps",children:"phoenix-cli getinfo\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Copy the ",(0,l.jsx)(n.code,{children:"channelId"})," of the channel you want to close."]}),"\n",(0,l.jsx)(n.h2,{id:"step-3-close-the-channel",children:"Step 3: Close the channel"}),"\n",(0,l.jsx)(n.h3,{id:"for-linuxmacos-1",children:"For Linux/MacOS"}),"\n",(0,l.jsx)(n.p,{children:"Run the following command:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"phoenix-cli closechannel \\\n  --channelId=<CHANNEL_ID> \\\n  --address=<BITCOIN_ADDRESS> \\\n  --feerateSatByte=<FEE_RATE>\n"})}),"\n",(0,l.jsx)(n.h3,{id:"for-windows-2",children:"For Windows"}),"\n",(0,l.jsx)(n.p,{children:"Run the following command:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ps",children:"phoenix-cli closechannel \\\n  --channelId=<CHANNEL_ID> \\\n  --address=<BITCOIN_ADDRESS> \\\n  --feerateSatByte=<FEE_RATE>\n"})}),"\n",(0,l.jsx)(n.h2,{id:"result",children:"Result"}),"\n",(0,l.jsx)(n.p,{children:"If successful, Phoenix returns the transaction ID of the closing transaction:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"758b3df67c62c9cd9ebbde1ff6eaadc1c51f94d5b1a3efb2548236b9a6f1c659\n"})}),"\n",(0,l.jsxs)(n.p,{children:["You can track this transaction using a Bitcoin block explorer like ",(0,l.jsx)(n.a,{href:"https://mempool.space/",children:"https://mempool.space/"})]}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsx)(n.p,{children:"The channel status will display as 'Negotiating' even after a succesful closure, this is a phoenixd bug, the channel should be closed after 6 confirmations and sats won't be available since they were sent to an on chain address."})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var i=s(6540);const l={},r=i.createContext(l);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);